<!DOCTYPE html>
<html lang="en">

<head>
	<title>Basic Scene with WebXR</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<!-- <link type="text/css" rel="stylesheet" href="style.css"> -->
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r126/three.js" crossorigin="anonymous"></script> -->
</head>

<body>
    <script type="importmap">
        {
            "imports": {
                "three": "./node_modules/three/build/three.module.js",
                "myARButton": "./src/myARButton.js"
               
            }
        }
    </script> 
	<script type="module">
    
        // To start an AR scene with webXR, we can use a handy button provided by three.js
        // We first have to import it because it is a javascript module
        import { myARButton } from 'myARButton';
        import * as THREE from 'three';
      

        let camera, scene, renderer,controls,stats,content;
        let loader,mesh; // we need to create a variable for a gltf model loader
        let girl = null;
        let turbo = null;
        let tree = null;
        let mononoke = null;
        let buttonStats = null;
        let button;

		init();
		animate();

		function init() {
			const container = document.createElement('div');
			document.body.appendChild(container);
            
            renderer = new THREE.WebGLRenderer({alpha: true });
			renderer.setPixelRatio(window.devicePixelRatio);
			renderer.setSize(window.innerWidth, window.innerHeight);
            // This next line is important to to enable the renderer for WebXR
			renderer.xr.enabled = true; //  enable the renderer for webxr
			container.appendChild(renderer.domElement);
           
            
			scene = new THREE.Scene();
			camera = new THREE.PerspectiveCamera(40, window.innerWidth / window.innerHeight,1,100 );

     
            
            
			// Add the AR button to the body of the DOM
            let tmp = myARButton.createButton(renderer);
           
			document.body.appendChild(tmp.res);
            buttonStats = tmp.stats;
         

			window.addEventListener('resize', onWindowResize, false);
		}

		function onWindowResize() {
			camera.aspect = window.innerWidth / window.innerHeight;
			camera.updateProjectionMatrix();

			renderer.setSize(window.innerWidth, window.innerHeight);
		}

		function animate() {
			renderer.setAnimationLoop(render);
		}

		function render() {  
            // rotateModel(girl,girlDegree);   
       
            if (buttonStats) {
                buttonStats.update();
            }
            
			renderer.render(scene, camera);
		}
     
	</script>
</body>

</html>